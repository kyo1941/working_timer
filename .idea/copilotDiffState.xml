<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/working_timer/navigation/AppNavHost.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/working_timer/navigation/AppNavHost.kt" />
              <option name="originalContent" value="package com.example.working_timer.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.navArgument&#10;import androidx.navigation.navDeepLink&#10;import com.example.working_timer.ui.edit_work.EditWorkScreen&#10;import com.example.working_timer.ui.log_view.LogViewScreenHolder&#10;import com.example.working_timer.ui.main.MainScreenHolder&#10;&#10;@Composable&#10;fun AppNavHost (&#10;    navController: NavHostController,&#10;    startDestination: String = Routes.Timer.routes&#10;) {&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = startDestination&#10;    ) {&#10;        composable(&#10;            Routes.Timer.routes,&#10;            deepLinks = listOf(navDeepLink { uriPattern = Routes.TimerDeepLink.routes })&#10;        ) {&#10;            MainScreenHolder (&#10;                onNavigateToLog = {&#10;                    navController.navigate(Routes.LogView.routes) {&#10;                        launchSingleTop = true&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        composable(Routes.LogView.routes) {&#10;            LogViewScreenHolder(&#10;                onNavigateToTimer = {&#10;                    navController.navigate(Routes.Timer.routes) {&#10;                        launchSingleTop = true&#10;                    }&#10;                },&#10;                onNavigateToEditWork = { id, startDay, isNew -&gt;&#10;                    navController.navigate(&#10;                        Routes.EditWork().createRoute(&#10;                            id = id,&#10;                            startDay = startDay,&#10;                            isNew = isNew&#10;                        )&#10;                    ) {&#10;                        launchSingleTop = true&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        composable(&#10;            route = Routes.EditWork().routes,&#10;            arguments = listOf(&#10;                navArgument(&quot;id&quot;) { type = NavType.IntType },&#10;                navArgument(&quot;startDay&quot;) { type = NavType.StringType },&#10;                navArgument(&quot;isNew&quot;) { type = NavType.BoolType }&#10;            )&#10;        ) { backStackEntry -&gt;&#10;            val id = backStackEntry.arguments?.getInt(&quot;id&quot;) ?: 0&#10;            val startDay = backStackEntry.arguments?.getString(&quot;startDay&quot;) ?: &quot;&quot;&#10;            val isNew = backStackEntry.arguments?.getBoolean(&quot;isNew&quot;) ?: true&#10;&#10;            EditWorkScreen(&#10;                id = id,&#10;                startDay = startDay,&#10;                isNew = isNew,&#10;                onNavigateBack = {&#10;                    navController.popBackStack()&#10;                }&#10;            )&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.example.working_timer.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.navArgument&#10;import androidx.navigation.navDeepLink&#10;import com.example.working_timer.ui.edit_work.EditWorkScreenHolder&#10;import com.example.working_timer.ui.log_view.LogViewScreenHolder&#10;import com.example.working_timer.ui.main.MainScreenHolder&#10;&#10;@Composable&#10;fun AppNavHost (&#10;    navController: NavHostController,&#10;    startDestination: String = Routes.Timer.routes&#10;) {&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = startDestination&#10;    ) {&#10;        composable(&#10;            Routes.Timer.routes,&#10;            deepLinks = listOf(navDeepLink { uriPattern = Routes.TimerDeepLink.routes })&#10;        ) {&#10;            MainScreenHolder (&#10;                onNavigateToLog = {&#10;                    navController.navigate(Routes.LogView.routes) {&#10;                        launchSingleTop = true&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        composable(Routes.LogView.routes) {&#10;            LogViewScreenHolder(&#10;                onNavigateToTimer = {&#10;                    navController.navigate(Routes.Timer.routes) {&#10;                        launchSingleTop = true&#10;                    }&#10;                },&#10;                onNavigateToEditWork = { id, startDay, isNew -&gt;&#10;                    navController.navigate(&#10;                        Routes.EditWork().createRoute(&#10;                            id = id,&#10;                            startDay = startDay,&#10;                            isNew = isNew&#10;                        )&#10;                    ) {&#10;                        launchSingleTop = true&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        composable(&#10;            route = Routes.EditWork().routes,&#10;            arguments = listOf(&#10;                navArgument(&quot;id&quot;) { type = NavType.IntType },&#10;                navArgument(&quot;startDay&quot;) { type = NavType.StringType },&#10;                navArgument(&quot;isNew&quot;) { type = NavType.BoolType }&#10;            )&#10;        ) { backStackEntry -&gt;&#10;            val id = backStackEntry.arguments?.getInt(&quot;id&quot;) ?: 0&#10;            val startDay = backStackEntry.arguments?.getString(&quot;startDay&quot;) ?: &quot;&quot;&#10;            val isNew = backStackEntry.arguments?.getBoolean(&quot;isNew&quot;) ?: true&#10;&#10;            EditWorkScreenHolder(&#10;                id = id,&#10;                startDay = startDay,&#10;                isNew = isNew,&#10;                onNavigateBack = {&#10;                    navController.popBackStack()&#10;                }&#10;            )&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/working_timer/ui/edit_work/EditWorkScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/working_timer/ui/edit_work/EditWorkScreen.kt" />
              <option name="originalContent" value="package com.example.working_timer.ui.edit_work&#10;&#10;import android.app.Activity&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.unit.dp&#10;import java.text.SimpleDateFormat&#10;import java.util.Locale&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.ui.text.style.TextDecoration&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.text.buildAnnotatedString&#10;import androidx.compose.ui.text.withStyle&#10;import androidx.compose.ui.text.SpanStyle&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.window.DialogProperties&#10;import com.example.working_timer.ui.components.DatePickerModal&#10;import com.example.working_timer.ui.components.MaterialTimePickerDialog&#10;import com.example.working_timer.R&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.hilt.navigation.compose.hiltViewModel&#10;import kotlinx.coroutines.flow.collectLatest&#10;import kotlinx.coroutines.launch&#10;&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun EditWorkScreen(&#10;    editWorkViewModel: EditWorkViewModel = hiltViewModel(),&#10;    id: Int,&#10;    startDay: String,&#10;    isNew: Boolean,&#10;    onNavigateBack: () -&gt; Unit = {},&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var showStartTimePicker by remember { mutableStateOf(false) }&#10;    var showStartDayPicker by remember { mutableStateOf(false) }&#10;    var showEndTimePicker by remember { mutableStateOf(false) }&#10;    var showEndDayPicker by remember { mutableStateOf(false) }&#10;&#10;    var showElapsedPicker by remember { mutableStateOf(false) }&#10;&#10;    val uiState by editWorkViewModel.uiState.collectAsState()&#10;&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    LaunchedEffect(Unit) {&#10;        // 初期値を設定する&#10;        editWorkViewModel.init(id, isNew, startDay)&#10;&#10;        // イベントを監視する&#10;        editWorkViewModel.uiEvent.collectLatest { event -&gt;&#10;            when (event) {&#10;                is EditWorkViewModel.UiEvent.ShowSnackbar -&gt; {&#10;                    scope.launch {&#10;                        snackbarHostState.showSnackbar(event.message)&#10;                    }&#10;                }&#10;                EditWorkViewModel.UiEvent.SaveSuccess -&gt; { onNavigateBack() }&#10;            }&#10;        }&#10;    }&#10;&#10;    Scaffold(&#10;        snackbarHost = { SnackbarHost(hostState = snackbarHostState) },&#10;        modifier = modifier&#10;    ) { _ -&gt;&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(24.dp),&#10;            verticalArrangement = Arrangement.spacedBy(16.dp)&#10;        ) {&#10;            val context = LocalContext.current&#10;            Text(&#10;                text = context.getString(if (isNew) R.string.new_record else R.string.edit_record),&#10;                style = MaterialTheme.typography.headlineMedium,&#10;                fontWeight = FontWeight.Bold,&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(vertical = 8.dp),&#10;            )&#10;&#10;            Spacer(modifier = Modifier.weight(0.3f))&#10;&#10;            Text(&quot;開始&quot;)&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.Center,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                TextButton(onClick = { showStartDayPicker = true }) {&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                append(formatMonthDay(uiState.startDay))&#10;                            }&#10;                        },&#10;                        style = MaterialTheme.typography.headlineSmall.copy(&#10;                            textDecoration = TextDecoration.Underline,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    )&#10;                }&#10;                Spacer(modifier = Modifier.width(32.dp))&#10;                TextButton(onClick = { showStartTimePicker = true }) {&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                append(uiState.startTime)&#10;                            }&#10;                        },&#10;                        style = MaterialTheme.typography.headlineSmall.copy(&#10;                            textDecoration = TextDecoration.Underline,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    )&#10;                }&#10;            }&#10;&#10;            Text(&quot;終了&quot;)&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.Center,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                TextButton(onClick = { showEndDayPicker = true }) {&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                append(formatMonthDay(uiState.endDay))&#10;                            }&#10;                        },&#10;                        style = MaterialTheme.typography.headlineSmall.copy(&#10;                            textDecoration = TextDecoration.Underline,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    )&#10;                }&#10;                Spacer(modifier = Modifier.width(32.dp))&#10;                TextButton(onClick = { showEndTimePicker = true }) {&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                append(uiState.endTime)&#10;                            }&#10;                        },&#10;                        style = MaterialTheme.typography.headlineSmall.copy(&#10;                            textDecoration = TextDecoration.Underline,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    )&#10;                }&#10;            }&#10;&#10;            Text(&quot;活動時間&quot;)&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.Center,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                TextButton(onClick = { showElapsedPicker = true }) {&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            if (uiState.elapsedHour &gt; 0) {&#10;                                withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                    append(String.format(&quot;%2d&quot;, uiState.elapsedHour))&#10;                                }&#10;                                append(&quot; 時間 &quot;)&#10;                            }&#10;                            withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                append(String.format(&quot;%2d&quot;, uiState.elapsedMinute))&#10;                            }&#10;                            append(&quot; 分&quot;)&#10;                        },&#10;                        style = MaterialTheme.typography.headlineSmall.copy(&#10;                            textDecoration = TextDecoration.Underline,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    )&#10;&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.weight(0.2f))&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Button(&#10;                    onClick = {&#10;                        onNavigateBack()&#10;                    },&#10;                    modifier = Modifier.weight(1f)&#10;                ) {&#10;                    Text(&quot;キャンセル&quot;)&#10;                }&#10;&#10;                Spacer(modifier = Modifier.width(24.dp))&#10;&#10;                Button(&#10;                    onClick = {&#10;                        editWorkViewModel.saveWork(&#10;                            id = id,&#10;                            isNew = isNew,&#10;                            forceSave = false&#10;                        )&#10;                    },&#10;                    modifier = Modifier.weight(1f)&#10;                ) {&#10;                    Text(&quot;保存&quot;)&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.weight(1f))&#10;        }&#10;&#10;        if (showStartTimePicker) {&#10;            MaterialTimePickerDialog(&#10;                initialTime = parseTime(uiState.startTime),&#10;                onDismiss = { showStartTimePicker = false },&#10;                onTimeSelected = {&#10;                    editWorkViewModel.updateStartTime(it)&#10;                    showStartTimePicker = false&#10;                }&#10;            )&#10;        }&#10;&#10;        if (showEndTimePicker) {&#10;            MaterialTimePickerDialog(&#10;                initialTime = parseTime(uiState.endTime),&#10;                onDismiss = { showEndTimePicker = false },&#10;                onTimeSelected = {&#10;                    editWorkViewModel.updateEndTime(it)&#10;                    showEndTimePicker = false&#10;                }&#10;            )&#10;        }&#10;&#10;        if (showStartDayPicker) {&#10;            DatePickerModal(&#10;                initialDate = uiState.startDay,&#10;                onDateSelected = {&#10;                    editWorkViewModel.updateStartDay(it)&#10;                    showStartDayPicker = false&#10;                },&#10;                onDismiss = { showStartDayPicker = false }&#10;            )&#10;        }&#10;&#10;        if (showEndDayPicker) {&#10;            DatePickerModal(&#10;                initialDate = uiState.endDay,&#10;                onDateSelected = {&#10;                    editWorkViewModel.updateEndDay(it)&#10;                    showEndDayPicker = false&#10;                },&#10;                onDismiss = { showEndDayPicker = false }&#10;            )&#10;        }&#10;&#10;        if (showElapsedPicker) {&#10;            MaterialTimePickerDialog(&#10;                initialTime = Pair(uiState.elapsedHour, uiState.elapsedMinute),&#10;                onDismiss = { showElapsedPicker = false },&#10;                onTimeSelected = { timeString -&gt;&#10;                    val (h, m) = timeString.split(&quot;:&quot;).map { it.toIntOrNull() ?: 0 }&#10;                    editWorkViewModel.updateElapsedTime(h, m)&#10;                    showElapsedPicker = false&#10;                },&#10;                showToggleIcon = false&#10;            )&#10;        }&#10;&#10;        if (uiState.showZeroMinutesError) {&#10;            AlertDialog(&#10;                onDismissRequest = { editWorkViewModel.clearZeroMinutesError() },&#10;                title = { Text(&quot;エラー&quot;) },&#10;                text = { Text(&quot;1分以上からのみ記録が可能です。&quot;) },&#10;                properties = DialogProperties(dismissOnClickOutside = false),&#10;                confirmButton = {&#10;                    TextButton(onClick = { editWorkViewModel.clearZeroMinutesError() }) {&#10;                        Text(&quot;OK&quot;)&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        if (uiState.showStartEndError) {&#10;            AlertDialog(&#10;                onDismissRequest = { editWorkViewModel.clearStartEndError() },&#10;                title = { Text(&quot;エラー&quot;) },&#10;                text = { Text(&quot;開始時刻が終了時刻を超えています。&quot;) },&#10;                properties = DialogProperties(dismissOnClickOutside = false),&#10;                confirmButton = {&#10;                    TextButton(onClick = { editWorkViewModel.clearStartEndError() }) {&#10;                        Text(&quot;OK&quot;)&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        if (uiState.showElapsedTimeOver) {&#10;            AlertDialog(&#10;                onDismissRequest = { editWorkViewModel.clearElapsedTimeOver() },&#10;                title = { Text(&quot;注意&quot;) },&#10;                text = { Text(&quot;活動時間が時間差より大きいです。\nこのまま保存しますか？&quot;) },&#10;                confirmButton = {&#10;                    TextButton(onClick = {&#10;                        editWorkViewModel.clearElapsedTimeOver()&#10;                        editWorkViewModel.saveWork(&#10;                            id = id,&#10;                            isNew = isNew,&#10;                            forceSave = true&#10;                        )&#10;                    }) {&#10;                        Text(&quot;保存&quot;)&#10;                    }&#10;                },&#10;                dismissButton = {&#10;                    TextButton(onClick = { editWorkViewModel.clearElapsedTimeOver() }) {&#10;                        Text(&quot;キャンセル&quot;)&#10;                    }&#10;                }&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;fun parseTime(time: String): Pair&lt;Int, Int&gt; {&#10;    val parts = time.split(&quot;:&quot;).mapNotNull { it.toIntOrNull() }&#10;    return if (parts.size == 2) Pair(parts[0], parts[1]) else Pair(0, 0)&#10;}&#10;&#10;fun formatMonthDay(fullDate: String): String {&#10;    return try {&#10;        val inputFormat = SimpleDateFormat(&quot;yyyy-MM-dd&quot;, Locale.getDefault())&#10;        val outputFormat = SimpleDateFormat(&quot;M/d&quot;, Locale.getDefault())&#10;        val date = inputFormat.parse(fullDate)&#10;        outputFormat.format(date)&#10;    } catch (e: Exception) {&#10;        fullDate&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.working_timer.ui.edit_work&#10;&#10;import android.app.Activity&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.unit.dp&#10;import java.text.SimpleDateFormat&#10;import java.util.Locale&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.ui.text.style.TextDecoration&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.text.buildAnnotatedString&#10;import androidx.compose.ui.text.withStyle&#10;import androidx.compose.ui.text.SpanStyle&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.window.DialogProperties&#10;import com.example.working_timer.ui.components.DatePickerModal&#10;import com.example.working_timer.ui.components.MaterialTimePickerDialog&#10;import com.example.working_timer.R&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.hilt.navigation.compose.hiltViewModel&#10;import kotlinx.coroutines.flow.collectLatest&#10;import kotlinx.coroutines.launch&#10;&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun EditWorkScreenHolder(&#10;    editWorkViewModel: EditWorkViewModel = hiltViewModel(),&#10;    id: Int,&#10;    startDay: String,&#10;    isNew: Boolean,&#10;    onNavigateBack: () -&gt; Unit = {},&#10;    modifier: Modifier = Modifier&#10;) {&#10;    val uiState by editWorkViewModel.uiState.collectAsState()&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    // Pickerの表示状態を管理&#10;    var showStartTimePicker by remember { mutableStateOf(false) }&#10;    var showStartDayPicker by remember { mutableStateOf(false) }&#10;    var showEndTimePicker by remember { mutableStateOf(false) }&#10;    var showEndDayPicker by remember { mutableStateOf(false) }&#10;    var showElapsedPicker by remember { mutableStateOf(false) }&#10;&#10;    LaunchedEffect(Unit) {&#10;        // 初期値を設定する&#10;        editWorkViewModel.init(id, isNew, startDay)&#10;&#10;        // イベントを監視する&#10;        editWorkViewModel.uiEvent.collectLatest { event -&gt;&#10;            when (event) {&#10;                is EditWorkViewModel.UiEvent.ShowSnackbar -&gt; {&#10;                    scope.launch {&#10;                        snackbarHostState.showSnackbar(event.message)&#10;                    }&#10;                }&#10;                EditWorkViewModel.UiEvent.SaveSuccess -&gt; { onNavigateBack() }&#10;            }&#10;        }&#10;    }&#10;&#10;    EditWorkScreen(&#10;        uiState = uiState,&#10;        snackbarHostState = snackbarHostState,&#10;        isNew = isNew,&#10;        showStartTimePicker = showStartTimePicker,&#10;        showStartDayPicker = showStartDayPicker,&#10;        showEndTimePicker = showEndTimePicker,&#10;        showEndDayPicker = showEndDayPicker,&#10;        showElapsedPicker = showElapsedPicker,&#10;        onNavigateBack = onNavigateBack,&#10;        onUpdateStartTime = { editWorkViewModel.updateStartTime(it) },&#10;        onUpdateEndTime = { editWorkViewModel.updateEndTime(it) },&#10;        onUpdateStartDay = { editWorkViewModel.updateStartDay(it) },&#10;        onUpdateEndDay = { editWorkViewModel.updateEndDay(it) },&#10;        onUpdateElapsedTime = { hour, minute -&gt; editWorkViewModel.updateElapsedTime(hour, minute) },&#10;        onSaveWork = { editWorkViewModel.saveWork(id, isNew, it) },&#10;        onClearZeroMinutesError = { editWorkViewModel.clearZeroMinutesError() },&#10;        onClearStartEndError = { editWorkViewModel.clearStartEndError() },&#10;        onClearElapsedTimeOver = { editWorkViewModel.clearElapsedTimeOver() },&#10;        onShowStartTimePicker = { showStartTimePicker = true },&#10;        onHideStartTimePicker = { showStartTimePicker = false },&#10;        onShowStartDayPicker = { showStartDayPicker = true },&#10;        onHideStartDayPicker = { showStartDayPicker = false },&#10;        onShowEndTimePicker = { showEndTimePicker = true },&#10;        onHideEndTimePicker = { showEndTimePicker = false },&#10;        onShowEndDayPicker = { showEndDayPicker = true },&#10;        onHideEndDayPicker = { showEndDayPicker = false },&#10;        onShowElapsedPicker = { showElapsedPicker = true },&#10;        onHideElapsedPicker = { showElapsedPicker = false },&#10;        modifier = modifier&#10;    )&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun EditWorkScreen(&#10;    uiState: EditWorkUiState,&#10;    snackbarHostState: SnackbarHostState,&#10;    isNew: Boolean,&#10;    showStartTimePicker: Boolean,&#10;    showStartDayPicker: Boolean,&#10;    showEndTimePicker: Boolean,&#10;    showEndDayPicker: Boolean,&#10;    showElapsedPicker: Boolean,&#10;    onNavigateBack: () -&gt; Unit,&#10;    onUpdateStartTime: (String) -&gt; Unit,&#10;    onUpdateEndTime: (String) -&gt; Unit,&#10;    onUpdateStartDay: (String) -&gt; Unit,&#10;    onUpdateEndDay: (String) -&gt; Unit,&#10;    onUpdateElapsedTime: (Int, Int) -&gt; Unit,&#10;    onSaveWork: (Boolean) -&gt; Unit,&#10;    onClearZeroMinutesError: () -&gt; Unit,&#10;    onClearStartEndError: () -&gt; Unit,&#10;    onClearElapsedTimeOver: () -&gt; Unit,&#10;    onShowStartTimePicker: () -&gt; Unit,&#10;    onHideStartTimePicker: () -&gt; Unit,&#10;    onShowStartDayPicker: () -&gt; Unit,&#10;    onHideStartDayPicker: () -&gt; Unit,&#10;    onShowEndTimePicker: () -&gt; Unit,&#10;    onHideEndTimePicker: () -&gt; Unit,&#10;    onShowEndDayPicker: () -&gt; Unit,&#10;    onHideEndDayPicker: () -&gt; Unit,&#10;    onShowElapsedPicker: () -&gt; Unit,&#10;    onHideElapsedPicker: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Scaffold(&#10;        snackbarHost = { SnackbarHost(hostState = snackbarHostState) },&#10;        modifier = modifier&#10;    ) { _ -&gt;&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(24.dp),&#10;            verticalArrangement = Arrangement.spacedBy(16.dp)&#10;        ) {&#10;            val context = LocalContext.current&#10;            Text(&#10;                text = context.getString(if (isNew) R.string.new_record else R.string.edit_record),&#10;                style = MaterialTheme.typography.headlineMedium,&#10;                fontWeight = FontWeight.Bold,&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(vertical = 8.dp),&#10;            )&#10;&#10;            Spacer(modifier = Modifier.weight(0.3f))&#10;&#10;            Text(&quot;開始&quot;)&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.Center,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                TextButton(onClick = onShowStartDayPicker) {&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                append(formatMonthDay(uiState.startDay))&#10;                            }&#10;                        },&#10;                        style = MaterialTheme.typography.headlineSmall.copy(&#10;                            textDecoration = TextDecoration.Underline,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    )&#10;                }&#10;                Spacer(modifier = Modifier.width(32.dp))&#10;                TextButton(onClick = onShowStartTimePicker) {&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                append(uiState.startTime)&#10;                            }&#10;                        },&#10;                        style = MaterialTheme.typography.headlineSmall.copy(&#10;                            textDecoration = TextDecoration.Underline,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    )&#10;                }&#10;            }&#10;&#10;            Text(&quot;終了&quot;)&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.Center,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                TextButton(onClick = onShowEndDayPicker) {&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                append(formatMonthDay(uiState.endDay))&#10;                            }&#10;                        },&#10;                        style = MaterialTheme.typography.headlineSmall.copy(&#10;                            textDecoration = TextDecoration.Underline,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    )&#10;                }&#10;                Spacer(modifier = Modifier.width(32.dp))&#10;                TextButton(onClick = onShowEndTimePicker) {&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                append(uiState.endTime)&#10;                            }&#10;                        },&#10;                        style = MaterialTheme.typography.headlineSmall.copy(&#10;                            textDecoration = TextDecoration.Underline,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    )&#10;                }&#10;            }&#10;&#10;            Text(&quot;活動時間&quot;)&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.Center,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                TextButton(onClick = onShowElapsedPicker) {&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            if (uiState.elapsedHour &gt; 0) {&#10;                                withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                    append(String.format(&quot;%2d&quot;, uiState.elapsedHour))&#10;                                }&#10;                                append(&quot; 時間 &quot;)&#10;                            }&#10;                            withStyle(style = SpanStyle(fontWeight = FontWeight.Bold)) {&#10;                                append(String.format(&quot;%2d&quot;, uiState.elapsedMinute))&#10;                            }&#10;                            append(&quot; 分&quot;)&#10;                        },&#10;                        style = MaterialTheme.typography.headlineSmall.copy(&#10;                            textDecoration = TextDecoration.Underline,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.weight(0.2f))&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Button(&#10;                    onClick = onNavigateBack,&#10;                    modifier = Modifier.weight(1f)&#10;                ) {&#10;                    Text(&quot;キャンセル&quot;)&#10;                }&#10;&#10;                Spacer(modifier = Modifier.width(24.dp))&#10;&#10;                Button(&#10;                    onClick = { onSaveWork(false) },&#10;                    modifier = Modifier.weight(1f)&#10;                ) {&#10;                    Text(&quot;保存&quot;)&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.weight(1f))&#10;        }&#10;&#10;        if (showStartTimePicker) {&#10;            MaterialTimePickerDialog(&#10;                initialTime = parseTime(uiState.startTime),&#10;                onDismiss = onHideStartTimePicker,&#10;                onTimeSelected = {&#10;                    onUpdateStartTime(it)&#10;                    onHideStartTimePicker()&#10;                }&#10;            )&#10;        }&#10;&#10;        if (showEndTimePicker) {&#10;            MaterialTimePickerDialog(&#10;                initialTime = parseTime(uiState.endTime),&#10;                onDismiss = onHideEndTimePicker,&#10;                onTimeSelected = {&#10;                    onUpdateEndTime(it)&#10;                    onHideEndTimePicker()&#10;                }&#10;            )&#10;        }&#10;&#10;        if (showStartDayPicker) {&#10;            DatePickerModal(&#10;                initialDate = uiState.startDay,&#10;                onDateSelected = {&#10;                    onUpdateStartDay(it)&#10;                    onHideStartDayPicker()&#10;                },&#10;                onDismiss = onHideStartDayPicker&#10;            )&#10;        }&#10;&#10;        if (showEndDayPicker) {&#10;            DatePickerModal(&#10;                initialDate = uiState.endDay,&#10;                onDateSelected = {&#10;                    onUpdateEndDay(it)&#10;                    onHideEndDayPicker()&#10;                },&#10;                onDismiss = onHideEndDayPicker&#10;            )&#10;        }&#10;&#10;        if (showElapsedPicker) {&#10;            MaterialTimePickerDialog(&#10;                initialTime = Pair(uiState.elapsedHour, uiState.elapsedMinute),&#10;                onDismiss = onHideElapsedPicker,&#10;                onTimeSelected = { timeString -&gt;&#10;                    val (h, m) = timeString.split(&quot;:&quot;).map { it.toIntOrNull() ?: 0 }&#10;                    onUpdateElapsedTime(h, m)&#10;                    onHideElapsedPicker()&#10;                },&#10;                showToggleIcon = false&#10;            )&#10;        }&#10;&#10;        if (uiState.showZeroMinutesError) {&#10;            AlertDialog(&#10;                onDismissRequest = onClearZeroMinutesError,&#10;                title = { Text(&quot;エラー&quot;) },&#10;                text = { Text(&quot;1分以上からのみ記録が可能です。&quot;) },&#10;                properties = DialogProperties(dismissOnClickOutside = false),&#10;                confirmButton = {&#10;                    TextButton(onClick = onClearZeroMinutesError) {&#10;                        Text(&quot;OK&quot;)&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        if (uiState.showStartEndError) {&#10;            AlertDialog(&#10;                onDismissRequest = onClearStartEndError,&#10;                title = { Text(&quot;エラー&quot;) },&#10;                text = { Text(&quot;開始時刻が終了時刻を超えています。&quot;) },&#10;                properties = DialogProperties(dismissOnClickOutside = false),&#10;                confirmButton = {&#10;                    TextButton(onClick = onClearStartEndError) {&#10;                        Text(&quot;OK&quot;)&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        if (uiState.showElapsedTimeOver) {&#10;            AlertDialog(&#10;                onDismissRequest = onClearElapsedTimeOver,&#10;                title = { Text(&quot;注意&quot;) },&#10;                text = { Text(&quot;活動時間が時間差より大きいです。\nこのまま保存しますか？&quot;) },&#10;                confirmButton = {&#10;                    TextButton(onClick = {&#10;                        onClearElapsedTimeOver()&#10;                        onSaveWork(true)&#10;                    }) {&#10;                        Text(&quot;保存&quot;)&#10;                    }&#10;                },&#10;                dismissButton = {&#10;                    TextButton(onClick = onClearElapsedTimeOver) {&#10;                        Text(&quot;キャンセル&quot;)&#10;                    }&#10;                }&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;fun parseTime(time: String): Pair&lt;Int, Int&gt; {&#10;    val parts = time.split(&quot;:&quot;).mapNotNull { it.toIntOrNull() }&#10;    return if (parts.size == 2) Pair(parts[0], parts[1]) else Pair(0, 0)&#10;}&#10;&#10;fun formatMonthDay(fullDate: String): String {&#10;    return try {&#10;        val inputFormat = SimpleDateFormat(&quot;yyyy-MM-dd&quot;, Locale.getDefault())&#10;        val outputFormat = SimpleDateFormat(&quot;M/d&quot;, Locale.getDefault())&#10;        val date = inputFormat.parse(fullDate)&#10;        outputFormat.format(date)&#10;    } catch (e: Exception) {&#10;        fullDate&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>